<% if (locals.category) { %>
<%
  const { subcategories, pages } = category
  const subcatsCount = Array.isArray(subcategories)
    ? subcategories.length
    : Object.keys(subcategories).reduce((acc, curr) => acc + subcategories[curr].length, 0)
  const pagesCount = Array.isArray(pages)
      ? pages.length
      : Object.keys(pages).reduce((acc, curr) => acc + pages[curr].length, 0)

  const subcatsRender = {
    className: 'category-subcategories',
    title: 'Subcategories',
    intro: subcatsCount === 1
      ? 'This category contains only the following subcategory.'
      : `This category has the following ${subcatsCount} subcategories.`,
    members: subcategories
  }

  const pagesRender = {
    className: 'category-pages',
    title: `Pages in category &ldquo;${title.substring(9)}&rdquo;`,
    intro: pagesCount === 1
        ? 'This category contains only the following page.'
        : `This category has the following ${pagesCount} pages.`,
    members: pages
  }
%>
<%- include('members', subcatsRender) %>
<%- include('members', pagesRender) %>
<% } %>